# 📱 产品需求文档 (PRD) - 健康仪表盘

## 1. 产品概述

### 1.1 产品名称
**健康仪表盘** (Health Dashboard)

### 1.2 产品定位
个人健康数据管理中心，通过整合多源健康数据，提供可视化分析和个性化健康建议。

### 1.3 产品愿景
让每个人都能轻松管理自己的健康数据，通过数据驱动的方式改善生活质量。

---

## 2. 用户故事

### 2.1 核心用户

#### 用户画像：老程
- **年龄**: 30+
- **职业**: 科技从业者
- **特点**: 注重健康、喜欢数据、习惯用科技工具
- **痛点**: 健康数据分散、难以追踪趋势

#### 用户故事

**作为** 老程，  
**我想要** 在一个地方查看所有健康数据，  
**以便** 了解我的健康状况和趋势。

**作为** 老程，  
**我想要** 自动同步 Apple Watch 数据，  
**以便** 无需手动记录每日活动。

**作为** 老程，  
**我想要** 拍照记录每餐食物，  
**以便** 追踪卡路里和营养摄入。

**作为** 老程，  
**我想要** 查看健康趋势图表，  
**以便** 了解体重、运动等变化。

**作为** 老程，  
**我想要** 获得个性化健康建议，  
**以便** 改善生活习惯。

---

## 3. 功能需求

### 3.1 功能模块

#### 模块 1: 用户管理

| 功能 ID | 功能名称 | 描述 | 优先级 |
|:---|:---|:---|:---:|
| UM-001 | 用户注册 | 支持邮箱/手机号注册 | P0 |
| UM-002 | 用户登录 | 支持飞书/Apple ID 登录 | P0 |
| UM-003 | 个人资料 | 管理个人信息、头像、偏好设置 | P1 |
| UM-004 | 账号安全 | 修改密码、绑定手机/邮箱 | P1 |
| UM-005 | 隐私设置 | 控制数据可见性、导出/删除数据 | P1 |

#### 模块 2: 健康数据管理

| 功能 ID | 功能名称 | 描述 | 优先级 |
|:---|:---|:---|:---:|
| HD-001 | Apple Health 同步 | 自动同步步数、心率、睡眠等数据 | P0 |
| HD-002 | 体重记录 | 手动记录体重，支持趋势图 | P0 |
| HD-003 | 运动记录 | 记录运动类型、时长、消耗卡路里 | P0 |
| HD-004 | 睡眠记录 | 记录睡眠时长、质量评分 | P1 |
| HD-005 | 心率监测 | 显示静息心率、最大心率趋势 | P1 |
| HD-006 | 血压记录 | 手动记录血压数据 | P2 |
| HD-007 | 血糖记录 | 手动记录血糖数据 | P2 |

#### 模块 3: 饮食管理

| 功能 ID | 功能名称 | 描述 | 优先级 |
|:---|:---|:---|:---:|
| DM-001 | 食物拍照 | 拍摄食物照片上传 | P0 |
| DM-002 | AI 食物识别 | 自动识别食物种类和分量 | P0 |
| DM-003 | 卡路里计算 | 自动计算食物卡路里 | P0 |
| DM-004 | 营养分析 | 分析蛋白质、碳水、脂肪等 | P0 |
| DM-005 | 饮食记录 | 记录每餐饮食，支持时间轴查看 | P0 |
| DM-006 | 饮水记录 | 记录每日饮水量 | P1 |
| DM-007 | 饮食建议 | 基于目标提供饮食建议 | P1 |

#### 模块 4: 仪表盘与可视化

| 功能 ID | 功能名称 | 描述 | 优先级 |
|:---|:---|:---|:---:|
| DB-001 | 今日概览 | 展示今日关键指标（步数、卡路里等） | P0 |
| DB-002 | 趋势图表 | 体重、步数、心率等趋势图（日/周/月） | P0 |
| DB-003 | 周/月报告 | 生成周/月度健康报告 | P1 |
| DB-004 | 目标追踪 | 显示目标完成进度 | P0 |
| DB-005 | 对比分析 | 与历史数据或同龄人对比 | P2 |
| DB-006 | 数据导出 | 导出 CSV/Excel/PDF 报告 | P2 |

#### 模块 5: 智能建议

| 功能 ID | 功能名称 | 描述 | 优先级 |
|:---|:---|:---|:---:|
| AI-001 | 健康评分 | 基于多维度数据计算健康评分 | P1 |
| AI-002 | 运动建议 | 根据目标和历史数据推荐运动 | P1 |
| AI-003 | 饮食建议 | 根据营养摄入提供饮食调整建议 | P1 |
| AI-004 | 睡眠建议 | 基于睡眠数据提供改善建议 | P2 |
| AI-005 | 异常提醒 | 检测异常数据并提醒用户 | P2 |
| AI-006 | 目标调整 | 基于进度智能调整目标 | P2 |

### 3.2 功能优先级矩阵

```
      ┌─────────────────────────────────────────────────────────┐
      │                    影响程度                              │
      │     低              中              高                   │
      ├─────────────────────────────────────────────────────────┤
 高   │  P2: 血压/血糖    P1: 睡眠/心率   P0: 用户/Apple │
紧    │  记录            记录            Health/体重   │
急    │                                                      │
程    │  P2: 血糖记录    P1: 饮水记录   P0: 食物拍照/  │
度    │                 对比分析        AI识别/卡路里  │
      │                                                      │
 低   │  P3: 社区功能    P2: 数据导出   P1: 今日概览/ │
      │                 对比分析        趋势图表     │
      └─────────────────────────────────────────────────────────┘
```

---

## 4. 非功能性需求

### 4.1 性能需求

| 指标 | 目标值 | 说明 |
|:---|:---|:---|
| **API 响应时间** | < 200ms (P95) | 正常负载下 95% 请求响应时间 |
| **页面加载时间** | < 2s | 首屏加载完成时间 |
| **并发用户数** | 1000+ | 系统支持的同时在线用户 |
| **数据库查询** | < 50ms | 简单查询响应时间 |
| **图片处理** | < 3s | 食物图片 AI 识别时间 |

### 4.2 可用性需求

| 指标 | 目标值 | 说明 |
|:---|:---|:---|
| **系统可用性** | 99.9% | 年度正常运行时间 |
| **故障恢复时间** | < 30min | 从故障到恢复服务时间 |
| **数据备份频率** | 每日 | 数据库自动备份 |
| **灾难恢复** | RPO < 1h, RTO < 4h | 数据丢失和恢复时间目标 |

### 4.3 安全需求

| 需求 | 实现方式 |
|:---|:---|
| **传输加密** | 全站 HTTPS (TLS 1.3) |
| **数据加密** | 敏感数据 AES-256 加密存储 |
| **密码安全** | bcrypt 哈希，加盐 |
| **认证机制** | JWT Token + 刷新机制 |
| **访问控制** | RBAC 角色权限控制 |
| **输入验证** | 参数校验、SQL 注入防护、XSS 防护 |
| **审计日志** | 关键操作记录 |
| **合规性** | GDPR、个保法合规 |

### 4.4 可扩展性需求

| 需求 | 实现方式 |
|:---|:---|
| **水平扩展** | 无状态服务，支持多实例部署 |
| **数据库扩展** | 读写分离、分库分表 |
| **缓存扩展** | Redis Cluster |
| **消息队列** | 异步处理，削峰填谷 |
| **微服务** | 未来可拆分为微服务架构 |

### 4.5 可维护性需求

| 需求 | 实现方式 |
|:---|:---|
| **代码质量** | 代码审查、单元测试覆盖率 > 80% |
| **文档完善** | API 文档、架构文档、部署文档 |
| **监控告警** | Prometheus + Grafana + 钉钉/飞书告警 |
| **日志管理** | ELK/Loki 日志收集与分析 |
| **版本管理** | Git 分支策略、版本号规范 |
| **自动化** | CI/CD 流水线，自动化测试、部署 |

---

## 5. 界面设计规范

### 5.1 设计原则

- **简洁**: 界面清晰，信息层级分明
- **一致**: 设计风格、交互模式统一
- **反馈**: 操作有明确反馈，状态可见
- **效率**: 减少操作步骤，支持快捷操作
- **美观**: 现代化设计，视觉舒适

### 5.2 色彩系统

```
主色调:
- 主色: #3B82F6 (蓝色) - 品牌色、主要按钮
- 辅色: #10B981 (绿色) - 成功、健康指标
- 警告: #F59E0B (橙色) - 警告、注意
- 错误: #EF4444 (红色) - 错误、危险

中性色:
- 标题: #111827 (深灰)
- 正文: #374151 (中灰)
- 次要: #6B7280 (浅灰)
- 禁用: #9CA3AF (更浅灰)

背景色:
- 页面: #F9FAFB (极浅灰)
- 卡片: #FFFFFF (白色)
- 分割线: #E5E7EB (边框灰)
```

### 5.3 字体规范

```
字体栈:
- 标题: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif
- 正文: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif
- 代码: 'Fira Code', 'Consolas', monospace

字号:
- H1: 32px / 40px line-height / font-weight: 700
- H2: 24px / 32px line-height / font-weight: 600
- H3: 20px / 28px line-height / font-weight: 600
- Body: 16px / 24px line-height / font-weight: 400
- Small: 14px / 20px line-height / font-weight: 400
- Caption: 12px / 16px line-height / font-weight: 400
```

### 5.4 间距系统

```
基础单位: 4px

常用间距:
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- 2xl: 48px
- 3xl: 64px

圆角:
- none: 0px
- sm: 2px
- md: 4px
- lg: 8px
- xl: 12px
- full: 9999px (圆形)
```

### 5.5 组件规范

#### Button 按钮

```
类型:
- Primary: 主按钮，实心蓝色背景
- Secondary: 次按钮，边框样式
- Text: 文字按钮，无背景
- Danger: 危险按钮，红色
- Ghost: 幽灵按钮，透明背景

尺寸:
- Small: 高度 32px，内边距 8px 16px
- Medium: 高度 40px，内边距 12px 24px
- Large: 高度 48px，内边距 16px 32px

状态:
- Default: 默认状态
- Hover: 鼠标悬停
- Active: 点击中
- Disabled: 禁用状态
- Loading: 加载中
```

#### Input 输入框

```
类型:
- Text: 单行文本
- Textarea: 多行文本
- Number: 数字
- Password: 密码
- Email: 邮箱
- Date: 日期
- Time: 时间
- Select: 下拉选择
- Radio: 单选
- Checkbox: 多选
- Switch: 开关

尺寸:
- Small: 高度 32px
- Medium: 高度 40px (默认)
- Large: 高度 48px

状态:
- Default: 默认状态
- Focus: 聚焦状态
- Error: 错误状态
- Disabled: 禁用状态
- ReadOnly: 只读状态
```

#### Card 卡片

```
结构:
- Header: 标题区域
- Body: 内容区域
- Footer: 底部区域

变体:
- Default: 默认卡片，带阴影
- Bordered: 带边框卡片
- Ghost: 幽灵卡片，透明背景
- Interactive: 可交互卡片，hover 有效果

尺寸:
- Small: 紧凑布局
- Medium: 默认尺寸
- Large: 宽松布局
```

#### Chart 图表

```
类型:
- Line: 折线图（趋势）
- Bar: 柱状图（对比）
- Pie: 饼图（占比）
- Area: 面积图（累积）
- Scatter: 散点图（分布）
- Radar: 雷达图（多维）
- Heatmap: 热力图（密度）

交互:
- Tooltip: 悬停提示
- Legend: 图例切换
- Zoom: 缩放
- Brush: 刷选
- Download: 下载图片

主题:
- Light: 浅色主题
- Dark: 深色主题
```

### 5.6 页面布局

#### Dashboard 仪表盘页面

```
┌─────────────────────────────────────────────────────────────────┐
│  Header: Logo + 导航 + 用户头像                                  │
├──────────┬────────────────────────────────────────────────────┤
│          │  欢迎语 + 日期 + 快捷操作                            │
│          ├────────────────────────────────────────────────────┤
│          │  概览卡片: 步数 | 卡路里 | 睡眠 | 体重             │
│  Sidebar │  ┌─────────┐  ┌─────────┐  ┌─────────┐            │
│  - 仪表盘│  │ 步数    │  │ 卡路里  │  │ 睡眠    │            │
│  - 健康  │  │ 10,234  │  │ 2,150   │  │ 7h 30m  │            │
│  - 饮食  │  └─────────┘  └─────────┘  └─────────┘            │
│  - 运动  │                                                    │
│  - 设置  │  趋势图表                                          │
│          │  ┌─────────────────────────────────────┐          │
│          │  │ 折线图: 体重趋势 (30天)              │          │
│          │  └─────────────────────────────────────┘          │
│          │                                                    │
│          │  ┌─────────────────────────────────────┐          │
│          │  │ 柱状图: 每日步数 (7天)              │          │
│          │  └─────────────────────────────────────┘          │
│          │                                                    │
│          │  今日饮食                                          │
│          │  ┌─────┐ ┌─────┐ ┌─────┐                           │
│          │  │早餐 │ │午餐 │ │晚餐 │                           │
│          │  └─────┘ └─────┘ └─────┘                           │
│          │                                                    │
└──────────┴────────────────────────────────────────────────────┘
```

#### Health Data 健康数据页面

```
┌─────────────────────────────────────────────────────────────────┐
│  Header                                                        │
├──────────┬────────────────────────────────────────────────────┤
│          │  健康数据 > 体重记录                                │
│          ├────────────────────────────────────────────────────┤
│          │  过滤器: 时间范围 [最近7天 ▼]  数据类型 [体重 ▼]   │
│          ├────────────────────────────────────────────────────┤
│  Sidebar │                                                    │
│          │  数据概览                                          │
│          │  ┌──────────────┐  ┌──────────────┐              │
│          │  │ 当前体重     │  │ 较上周       │              │
│          │  │ 72.5 kg      │  │ -0.8 kg ↓   │              │
│          │  └──────────────┘  └──────────────┘              │
│          │                                                    │
│          │  趋势图表                                          │
│          │  ┌────────────────────────────────────────┐      │
│          │  │                                        │      │
│          │  │      折线图: 体重变化趋势              │      │
│          │  │                                        │      │
│          │  └────────────────────────────────────────┘      │
│          │                                                    │
│          │  数据列表                                          │
│          │  ┌────────────────────────────────────────┐      │
│          │  │ 日期       │ 体重(kg) │ 备注           │      │
│          │  ├────────────────────────────────────────┤      │
│          │  │ 2024-02-26 │ 72.5     │ 早餐前测量     │      │
│          │  │ 2024-02-25 │ 73.2     │                │      │
│          │  │ 2024-02-24 │ 73.0     │                │      │
│          │  └────────────────────────────────────────┘      │
│          │                                                    │
│          │  [+ 添加记录]                                    │
│          │                                                    │
└──────────┴────────────────────────────────────────────────────┘
```

#### Diet 饮食管理页面

```
┌─────────────────────────────────────────────────────────────────┐
│  Header                                                        │
├──────────┬────────────────────────────────────────────────────┤
│          │  饮食管理 > 今日饮食                                │
│          ├────────────────────────────────────────────────────┤
│          │  日期: [2024-02-26 ▼]                               │
│          ├────────────────────────────────────────────────────┤
│  Sidebar │                                                    │
│          │  今日营养概览                                        │
│          │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│          │  │ 卡路里  │ │ 蛋白质  │ │ 碳水    │ │ 脂肪    │   │
│          │  │ 1,850   │ │ 95g     │ │ 220g    │ │ 65g     │   │
│          │  │ / 2,000 │ │ / 120g  │ │ / 250g  │ │ / 70g   │   │
│          │  └─────────┘ └─────────┘ └─────────┘ └─────────┘   │
│          │                                                    │
│          │  餐食记录                                          │
│          │  ┌────────────────────────────────────────┐      │
│          │  │ 🌅 早餐                     08:00    │      │
│          │  │ [图片] 燕麦粥 + 鸡蛋 + 牛奶           │      │
│          │  │ 450 kcal | 20g蛋白质                  │      │
│          │  ├────────────────────────────────────────┤      │
│          │  │ ☀️ 午餐                     12:30    │      │
│          │  │ [图片] 米饭 + 红烧肉 + 青菜           │      │
│          │  │ 650 kcal | 30g蛋白质                  │      │
│          │  ├────────────────────────────────────────┤      │
│          │  │ 🌙 晚餐                     19:00    │      │
│          │  │ [图片] 沙拉 + 鸡胸肉 + 酸奶          │      │
│          │  │ 550 kcal | 35g蛋白质                  │      │
│          │  ├────────────────────────────────────────┤      │
│          │  │ 🍎 加餐                     15:30    │      │
│          │  │ 苹果 + 坚果                           │      │
│          │  │ 200 kcal | 10g蛋白质                  │      │
│          │  └────────────────────────────────────────┘      │
│          │                                                    │
│          │  [📷 拍照记录饮食]                               │
│          │                                                    │
└──────────┴────────────────────────────────────────────────────┘
```

---

## 5. 交互设计

### 5.1 交互原则

- **即时反馈**: 用户操作后，界面应立即给出反馈
- **容错设计**: 允许用户撤销操作，提供错误提示和解决方案
- **效率优先**: 减少不必要的步骤，支持快捷操作
- **一致性**: 相同功能保持相同的交互方式

### 5.2 交互流程

#### 食物拍照流程

```
用户点击"拍照记录" → 选择拍照或相册 → 确认照片 → AI识别中 → 显示识别结果
      ↓                    ↓               ↓              ↓                ↓
   打开相机/相册       用户拍照/选图    预览确认      显示加载动画    显示食物信息
                                                                   + 编辑调整
                                                                           ↓
                                                                   确认保存 → 成功提示
```

#### Apple Health 数据同步流程

```
用户开启同步 → 请求 HealthKit 授权 → 用户授权 → 读取 Health 数据 → 发送到后端 → 存储到数据库
      ↓              ↓                   ↓              ↓                  ↓              ↓
   点击同步按钮    弹出授权窗口       用户点击允许    读取步数/心率等   HTTP POST    插入/更新记录
                                                                         ↓
                                                                   返回同步结果
```

---

## 6. 响应式设计

### 6.1 断点设置

| 断点 | 宽度 | 设备类型 |
|:---|:---|:---|
| **xs** | < 640px | 手机竖屏 |
| **sm** | 640px - 768px | 手机横屏/小屏平板 |
| **md** | 768px - 1024px | 平板竖屏 |
| **lg** | 1024px - 1280px | 平板横屏/小屏桌面 |
| **xl** | 1280px - 1536px | 桌面显示器 |
| **2xl** | > 1536px | 大屏幕显示器 |

### 6.2 布局适配

**桌面端 (lg 及以上)**:
- 左侧固定侧边栏导航
- 主内容区最大宽度 1200px，居中
- 图表并排显示
- 数据表格完整展示

**平板端 (md)**:
- 侧边栏收起为图标或隐藏
- 汉堡菜单触发侧边栏
- 图表单排显示
- 数据表格横向滚动

**手机端 (sm 及以下)**:
- 底部标签栏导航
- 卡片式布局，单列显示
- 图表简化或转为数值展示
- 滑动操作，减少点击

---

## 7. 附录

### 7.1 术语表

| 术语 | 英文 | 说明 |
|:---|:---|:---|
| 健康数据 | Health Data | 包括体重、步数、心率、睡眠等个人健康相关数据 |
| 卡路里 | Calories | 食物所含能量单位，千卡 (kcal) |
| 蛋白质 | Protein | 人体必需营养素，由氨基酸组成 |
| 碳水化合物 | Carbohydrates | 人体主要能量来源 |
| 脂肪 | Fat | 人体必需营养素，提供能量和必需脂肪酸 |
| Apple Health | Apple 健康 | Apple 提供的健康数据平台 |
| HealthKit | 健康套件 | Apple 提供的健康数据 API |
| BMI | 身体质量指数 | Body Mass Index，体重(kg)/身高²(m²) |
| 静息心率 | Resting Heart Rate | 清醒、静止状态下的心率 |
| 最大心率 | Max Heart Rate | 运动时可达到的最高心率 |
| 深度睡眠 | Deep Sleep | 睡眠周期中的深度睡眠阶段 |
| REM 睡眠 | REM Sleep | 快速眼动睡眠，做梦阶段 |

### 7.2 参考资源

- [Apple HealthKit 文档](https://developer.apple.com/documentation/healthkit)
- [FastAPI 文档](https://fastapi.tiangolo.com/)
- [React 文档](https://react.dev/)
- [Tailwind CSS 文档](https://tailwindcss.com/)
- [PostgreSQL 文档](https://www.postgresql.org/docs/)
- [Docker 文档](https://docs.docker.com/)
- [Prometheus 文档](https://prometheus.io/docs/)
- [Grafana 文档](https://grafana.com/docs/)

---

**文档版本**: v1.0.0  
**最后更新**: 2026-02-26  
**状态**: ✅ 完成，待开发开始
